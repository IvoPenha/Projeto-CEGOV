"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = transform;

var _isObject2 = _interopRequireDefault(require("lodash/isObject"));

var _defaults2 = _interopRequireDefault(require("lodash/defaults"));

var _isFunction2 = _interopRequireDefault(require("lodash/isFunction"));

var _isString2 = _interopRequireDefault(require("lodash/isString"));

var _reduce2 = _interopRequireDefault(require("lodash/reduce"));

var _isArray2 = _interopRequireDefault(require("lodash/isArray"));

var _transforms = _interopRequireDefault(require("./transforms"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function transform(props, method) {
  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;

  if (!(0, _isArray2["default"])(method)) {
    method = [method];
  }

  return (0, _reduce2["default"])(method, function (props, method) {
    if ((0, _isString2["default"])(method)) {
      if ((0, _isFunction2["default"])(_transforms["default"][method])) {
        return (0, _defaults2["default"])(_transforms["default"][method](props, options), props);
      } else {
        return props;
      }
    } else if ((0, _isFunction2["default"])(method)) {
      return (0, _defaults2["default"])(method(props, options), props);
    } else if ((0, _isObject2["default"])(method)) {
      return transform(props, method.method, method.options);
    } else {
      return props;
    }
  }, props);
}